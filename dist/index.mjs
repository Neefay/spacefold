import{useRef as T}from"react";function b(r){let e=T();return e.current||(e.current={v:r()}),e.current.v}import{useEffect as f,useLayoutEffect as p}from"react";var a=typeof window<"u",d=a?p:f,c=d;function v(){let r=Symbol(),e=new Set;return{id:r,listeners:e,send(...t){for(let o of e)o(...t)},subscribe(t){return e.add(t),{unsubscribe(){e.delete(t)}}}}}function w(r){let e=Symbol(),t=new Set;function o(u,s){c(()=>{if(r.register.every(n=>n.id!==u.id))throw new Error("This publisher is not register on your subscriber");let i=u.subscribe(async(...n)=>{await s(...n)});return t.add(i),()=>{i.unsubscribe()}},[s])}return{id:e,on:o}}function C(r){return{on:b(()=>r.on)}}export{v as pub,w as sub,C as useSub};
//# sourceMappingURL=index.mjs.map